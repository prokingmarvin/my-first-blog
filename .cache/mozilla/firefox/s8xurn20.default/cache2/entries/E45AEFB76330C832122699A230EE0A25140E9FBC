var TG_Moregames = {

	rootURL : 'http://marketing-cloud.travian.com/moregames/',
	
	bodyOverflow : null,


	popupTitles : {
		'de-DE' : 'Mehr Spiele',
		'cs-CZ' : 'DalÅ¡Ã­ prohlÃ­Å¾eÄovÃ© hry',
		'da-DK' : 'Flere spil',		
		'bs-BA' : 'JoÅ¡ igara',
		'bg-BG' : 'ĞÑ‰Ğµ Ğ¸Ğ³Ñ€Ğ¸',
		'en-US' : 'More games',
		'en-GB' : 'More games',
		'en-ZA' : 'More games',				
		'en-IN' : 'More games',						
		'fi-FI' : 'LisÃ¤Ã¤ pelejÃ¤',
		'fr-FR' : 'Plus de jeux',
		'el-GR' : 'Î†Î»Î»Î± Ï€Î±Î¹Ï‡Î½Î¯Î´Î¹Î±',
		'hr-HR' : 'ViÅ¡e igara',
		'hu-HU' : 'MÃ©g tÃ¶bb jÃ¡tÃ©k',
		'he-IL' : "××©×—×§×™× × ×•×¡×¤×™×",
		'it-IT' : "Altri giochi",
		'lt-LT' : "Kiti Å¾aidimai",
		'es-ES' : "MÃ¡s juegos",
		'nl-NL' : "Meer spellen",

		'no-NO' : 'Andre spill', 
		'pl-PL' : 'WiÄ™cej gier', 
		'pt-PT' : 'Mais jogos', 
		'ro-RO' : 'Mai multe jocuri', 
		'sr-RS' : 'Ğ’Ğ¸ÑˆĞµ Ğ¸Ğ³Ñ€Ğ¸Ñ†Ğ°', 
		'ru-RU' : 'Ğ”Ñ€ÑƒĞ³Ğ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹', 
		'sv-SE' : 'Fler Spel', 
		'sl-SI' : 'VeÄ iger', 
		'sk-SK' : 'Viac hier', 
		'tr-TR' : 'Daha fazla oyun', 
		'uk-UA' : 'Ğ†Ğ½ÑˆÑ– Ñ–Ğ³Ñ€Ğ¸', 
		'et-EE' : 'Teised mÃƒÂ¤ngud', 
		'lv-LV' : 'Citas spÄ“les', 
		'es-CL' : 'MÃ¡s Juegos', 
		'es-AR' : 'MÃ¡s Juegos', 
		'es-MX' : 'MÃ¡s Juegos', 				
		'pt-BR' : 'Mais jogos', 
		'zh-TW' : 'æ›´å¤šéŠæˆ²', 
		'id-ID' : 'Permainan lain',
		'vi-VN' : 'CÃ¡c trÃ² chÆ¡i khÃ¡c',
		'th-TH' : 'à¹€à¸à¸¡à¹€à¸à¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡', 
		'ms-MY' : 'Lebih permainan', 
		'ar-EG' : 'Ø£Ù„Ø¹Ø§Ø¨ Ø£Ø®Ø±Ù‰', 
		'ar-AE' : 'Ø£Ù„Ø¹Ø§Ø¨ Ø£Ø®Ø±Ù‰', 
		'fa-IR' : 'Ø¨Ø§Ø²ÛŒ Ù‡Ø§ÛŒâ€ŒØ¯ÛŒÚ¯Ø±',
		
		'ja-JP' : 'ä»–ã®ã‚²ãƒ¼ãƒ ',
		
	},
	
	buttonTexts : {
		'de-DE' : "Jetzt spielen!",
		'cs-CZ' : 'HrÃ¡t teÄ!',
		'da-DK' : 'Spil nu!',
		'bs-BA' : 'Igrajtesada!',
		'bg-BG' : 'Ğ˜Ğ³Ñ€Ğ°Ğ¹Ñ‚ĞµÑĞµĞ³Ğ°!',
		'en-US' : 'Play now!',
		'en-IN' : 'Play now!',		
		'en-GB' : 'Play now!',		
		'fi-FI' : 'Pelaanyt!',
		'fr-FR' : 'Jouez maintenant!',	
		'el-GR' : 'Î Î±Î¯Î¾Îµ  Ï„ÏÏÎ±!',
		'hr-HR' : 'Igrajtesada!',
		'hu-HU' : 'JÃ¡tssz most',
        'he-IL' : '×©×—×§  ×¢×›×©×™×•!',
		'it-IT' : "Gioca ora!",
		'lt-LT' : "Å½aisk dabar!",
		'es-ES' : 'Â¡Juega ahora!',
		'nl-NL' : 'Speel nu!',
		
		'no-NO' : 'Spill nÃ¥!',
		'pl-PL' : 'Zagraj teraz!',
		'pt-PT' : 'Joga agora!',
		'ro-RO' : 'JoacÄƒ acum!',
		'sr-RS' : 'Ğ˜Ğ³Ñ€Ğ°Ñ˜Ñ‚Ğµ ÑĞ°Ğ´Ğ°!',
		'ru-RU' : 'Ğ˜Ğ³Ñ€Ğ°Ñ‚ÑŒ ÑĞµĞ¹Ñ‡Ğ°Ñ!',
		'sv-SE' : 'Spela nu!',
		'sl-SI' : 'Igraj zdaj!',
		'sk-SK' : 'PoÄ hraÅ¥!',
		'tr-TR' : 'Hemen oyna!',
		'uk-UA' : 'ĞŸĞ¾Ñ‡Ğ°Ñ‚Ğ¸ Ğ³Ñ€Ñƒ!',
		'et-EE' : 'MÃ¤ngi nÃ¼Ã¼d!',
		'lv-LV' : 'SpÄ“lÄ“jiet tagad!',
		'es-CL' : 'Â¡Juega ahora!',
		'es-AR' : 'Â¡Juega ahora!',		
		'es-MX' : 'Â¡Juega ahora!',				
		'pt-BR' : 'Jogar agora!',
		'zh-TW' : 'é¦¬ä¸Šç©ï¼',
		'id-ID' : 'Main sekarang!',
        'vi-VN' : 'ChÆ¡i ngay miá»…n phÃ­!',
        'th-TH' : 'à¹€à¸¥à¹ˆà¸™à¸Ÿà¸£à¸µà¸•à¸­à¸™à¸™à¸µà¹‰!',
        'ms-MY' : 'Main sekarang Dengan Percuma!',

		'ar-AE' : 'Ø§ÙÙ„Ø¹Ø¨Ù‡Ø§ Ø§Ù„Ø¢Ù† Ù…Ø¬Ø§Ù†Ø§Ù‹!',
		'ar-EG' : 'Ø§ÙÙ„Ø¹Ø¨Ù‡Ø§ Ø§Ù„Ø¢Ù† Ù…Ø¬Ø§Ù†Ø§Ù‹!',
		'ja-JP' : 'ä»Šã™ãç„¡æ–™ã§ãƒ—ãƒ¬ã‚¤ï¼'


		
		
		
		
		
	},
	
	

	_generateGamesHTML : function (json) {
		var html='';
				
		for (var i=0; i != json.length;++i) {
		
			var game = json[i];
			
			var lng = this.language;
			
			if (!game.languages.hasOwnProperty(this.language)) {
				if (game.languages.hasOwnProperty('en-GB')) {
					lng ='en-GB';
				} else if (game.languages.hasOwnProperty('en-US')) {
					lng = 'en-US';
				}
			} 
			
			var languageNode = game.languages[lng];
			
			var title = languageNode.title;
			var desc = languageNode.description;
			var link = languageNode.link;
			
			html += '<div class="TG_Moregames_game ' + (json.length-1 == i ? 'last' : '') + '">';
			html += '  <div class="TG_Moregames_thumb"><a href="' + link + '" target="_blank"><img src="' +game.image +'" class="normal" /><img src="' +game.mouseover +'" class="mouseover" style="display:none" /></a></div>';			
			html += '  <div class="TG_Moregames_text"><span>' + title + '</span><p>' + desc + '</p><a href="' + link + '" class="TG_Moregames_play">' + this.buttonTexts[this.language] + '</a></div>';						
			html += '  <hr />';			
			html += '</div>';			
			
		}
				
		return html;
	},

	
	hidePopup : function () {

		jQuery('body').removeClass('TG_Moregames_modal-open');	
		jQuery('#TG_Moregames').animate({opacity:0}, 200, function () {
			jQuery('#TG_Moregames_bg').animate({opacity:0},200, function() {
				jQuery('#TG_Moregames_bg,#TG_Moregames').css('display','none');
				if (typeof enable_scroll == 'function') { 
					enable_scroll();
				}
				
			});
		});
		
	
	},
	
	_setupSizes : function () {

		var popup = jQuery('#TG_Moregames');
		var w=700,h=600,pd=30;
		
		if (jQuery(window).width() <= 480) {
			w = jQuery(window).width() -50;
			h = jQuery(window).height() -50;
			pd = 20;
		}
		if (jQuery(window).width() > 480 && jQuery(window).width() <= 800) {
			w = jQuery(window).width() -50;
			h = jQuery(window).height() -50;
			pd = 20;
		}


		popup.css('width',w).css('height',h).css('margin-left', w/-2).css('margin-top',h/-2);
		jQuery('#TG_Moregames .TG_Moregames_wrapper .wrp').css('height',h-(pd*2)-50);
		
		jQuery('#TG_Moregames a.close').css('top',-13).css('left',w-15);		
	
	},
	
	_loadJSON : function(game) {
		var dt = new Date();
		var ts = dt.getFullYear().toString() + dt.getMonth().toString() + dt.getDate().toString(); 
		jQuery('head').append ('<script type="text/javascript" src="' + this.rootURL + 'configs/config_' + game+ '.json?' + ts + '"></script>' );	

	},
	

	_initPopup : function (game,json) {
	
		var html='<div id="TG_Moregames_bg" style="display:none" onclick="TG_Moregames.hidePopup()"></div><div id="TG_Moregames" class="' + game + '" style="display:none">';
		html += '<div style="height:0px"><a href="javascript:void(0)" onclick="TG_Moregames.hidePopup()" class="close"></a></div>';
		html += '<h1 class="TG_Moregames">' + this.popupTitles[this.language]+ '</h1>';
		html += '<div class="TG_Moregames_wrapper"><div class="wrp"><div class="TG_Moregames_games">';
		html += this._generateGamesHTML(json);
		html += '</div></div></div>';		
		html += '</div>';
		jQuery(html).appendTo(jQuery('body'));
		
		this._setupSizes();
		this._showPopup(game);
	},
	
	_showPopup : function (game) {


		var bgOpacity = 0.4;
		if (game == 'goalunited-legends') {
			bgOpacity = 0.8;
		}
		
		if (typeof disable_scroll == 'function') { 
			disable_scroll();
		}

	
		jQuery('#TG_Moregames_bg').css('opacity',0).css('display','');
		jQuery('#TG_Moregames').css('opacity',0).css('display','');
		jQuery('#TG_Moregames_bg').animate({opacity:bgOpacity}, 200, function () {
			jQuery('#TG_Moregames').animate({opacity:1},300);
		});
	
		if (game == 'goalunited-pro') {
			jQuery('body').addClass('TG_Moregames_modal-open');

		}
	
	},

	_removePopup: function() {
		jQuery('#TG_Moregames_bg, #TG_Moregames').remove();
	},

	_showProgressbar : function () {
		var html = '<div id="TG_Moregames_progress"><img src="' + this.rootURL + 'ajax-load.gif" /></div>';
		jQuery(html).appendTo(jQuery('body'));	
	},
	
	jsonLoaded : function() {
		var self=this;
		jQuery(window).on('resize', function(){
			self._setupSizes();
		});
		jQuery('#TG_Moregames_progress').remove();
		this._initPopup(this.game, TG_Moregames_JSON);	
	
	},
	my : 0,
	show : function (game, language) {
		
		if (this.bodyOverflow == null) {
			this.bodyOverflow = jQuery('body').css('overflow');	
		}
		var self=this;
		jQuery('body').on('touchstart', function(e) { self.my = e.originalEvent.touches[0].clientY;  });
		jQuery('body').on('touchmove', function(e) { 
			var cy = e.originalEvent.touches[0].clientY;
			if (cy-self.my > 0) {
				if (jQuery('#TG_Moregames .wrp').scrollTop() == 0) {
					e.preventDefault();return;
				}
			}	 
			self.my = cy;

		 });
		jQuery('body').css('overflow','hidden').css('height','100%');
	        	
		if (['travian-legends', 'travian-kingdoms', 'railnation','truck-nation', 'goalunited-legends', 'miramagia', 'unitedgp', 'goalunited-pro'].indexOf(game) == -1) {
		
			console.log('TG more games script: ' + game + ' is not a valid game name');
			return;
		}
		
		this.game = game;
		this.language = language;
		this._removePopup();
		this._showProgressbar();
		this._loadJSON(game);			

	}

};vÀ¯–M      Y-˜uY-˜K=Ğ}Y>?`   ::http://marketing-cloud.travian.com/moregames/moregames.js necko:classified 1 request-method GET response-head HTTP/1.1 200 OK
Server: nginx
Date: Tue, 30 May 2017 16:05:31 GMT
Content-Type: application/x-javascript
Content-Length: 8210
Last-Modified: Tue, 24 Jan 2017 08:33:49 GMT
Etag: "5887116d-2012"
Accept-Ranges: bytes
 uncompressed-len 0    